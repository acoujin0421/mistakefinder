<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>오입력 파인더</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  .input-group { margin-bottom: 10px; }
  #results { margin-top: 20px; }
</style>
</head>
<body>
<h2>오입력 파인더</h2>

<div class="input-group">
  <label for="file1">CSV 파일 1:</label>
  <input type="file" id="file1" accept=".csv">
</div>

<div class="input-group">
  <label for="file2">CSV 파일 2:</label>
  <input type="file" id="file2" accept=".csv">
</div>

<button onclick="compareFiles()">비교하기</button>

<div id="results"></div>

<script>
  function readFile(file, callback) {
    const reader = new FileReader();
    reader.onload = () => callback(reader.result);
    reader.readAsText(file);
  }

  function parseCSV(text) {
    return text.split('\n').map(row => row.split(','));
  }

  function compareArrays(arr1, arr2) {
    const differences = [];
    arr1.forEach((row, rowIndex) => {
      row.forEach((cell, cellIndex) => {
        if (arr2[rowIndex] && cell !== arr2[rowIndex][cellIndex]) {
          differences.push(`[${rowIndex + 1}, ${cellIndex + 1}]`);
        }
      });
    });
    return differences;
  }

  function compareFiles() {
    const file1 = document.getElementById('file1').files[0];
    const file2 = document.getElementById('file2').files[0];
    if (!file1 || !file2) {
      alert('두 개의 CSV 파일을 선택해주세요.');
      return;
    }

    readFile(file1, content1 => {
      readFile(file2, content2 => {
        const csv1 = parseCSV(content1);
        const csv2 = parseCSV(content2);
        const differences = compareArrays(csv1, csv2);
        document.getElementById('results').innerHTML = differences.length ?
          `차이가 있는 셀 좌표: ${differences.join(', ')}` :
          '두 파일은 동일합니다.';
      });
    });
  }
</script>
</body>
</html>
