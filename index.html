<!DOCTYPE html>
<html>
<head>
    <title>오입력 파인더</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        input, button {
            margin: 10px;
        }
    </style>
</head>
<body>
    <h2>오입력 파인더</h2>
    <input type="file" id="file1" accept=".csv">
    <input type="file" id="file2" accept=".csv">
    <button onclick="compareFiles()">비교 시작</button>
    <div id="result"></div>

    <script>
        function readFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsText(file);
            });
        }

        async function compareFiles() {
            const fileInput1 = document.getElementById('file1');
            const fileInput2 = document.getElementById('file2');
            const resultDiv = document.getElementById('result');

            if (!fileInput1.files.length || !fileInput2.files.length) {
                resultDiv.innerHTML = "두 개의 파일을 모두 선택해주세요.";
                return;
            }

            try {
                const fileContent1 = await readFile(fileInput1.files[0]);
                const fileContent2 = await readFile(fileInput2.files[0]);

                const rows1 = fileContent1.split('\n');
                const rows2 = fileContent2.split('\n');

                let differences = '';
                rows1.forEach((row, rowIndex) => {
                    const cells1 = row.split(',');
                    const cells2 = rows2[rowIndex].split(',');
                    cells1.forEach((cell, cellIndex) => {
                        if (cell !== cells2[cellIndex]) {
                            const cellPosition = `열 ${String.fromCharCode(65 + cellIndex)} 행 ${rowIndex + 1}`;
                            differences += `<div>다른 값 발견: ${cellPosition} (${cell} vs ${cells2[cellIndex]})</div>`;
                        }
                    });
                });

                resultDiv.innerHTML = differences || '모든 값이 일치합니다!';
            } catch (error) {
                resultDiv.innerHTML = "파일을 읽는 중 오류가 발생했습니다.";
            }
        }
    </script>
</body>
</html>
