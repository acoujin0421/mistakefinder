<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>오입력 파인더</title>
<style>
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f3f3f9;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .input-container {
        margin-bottom: 20px;
    }
    #result {
        margin-top: 20px;
        color: #333;
    }
    .button {
        background-color: #89CFF0;
        color: white;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 12px;
    }
</style>
</head>
<body>
<h2>오입력 파인더</h2>
<div class="input-container">
    <input type="file" id="file1" accept=".csv">
    <input type="file" id="file2" accept=".csv">
    <button class="button" onclick="compareFiles()">비교하기</button>
</div>
<div id="result"></div>

<script>
    function parseCSV(text) {
        const rows = text.split('\n');
        return rows.map(row => row.split(','));
    }

    function compareFiles() {
        const file1 = document.getElementById('file1').files[0];
        const file2 = document.getElementById('file2').files[0];
        if (!file1 || !file2) {
            alert('두 개의 CSV 파일을 선택해주세요.');
            return;
        }

        const reader1 = new FileReader();
        const reader2 = new FileReader();

        reader1.onload = function(e) {
            const content1 = e.target.result;
            reader2.onload = function(e) {
                const content2 = e.target.result;

                const data1 = parseCSV(content1);
                const data2 = parseCSV(content2);
                const resultElement = document.getElementById('result');
                resultElement.innerHTML = '';

                let differencesFound = false;
                data1.forEach((row, rowIndex) => {
                    row.forEach((cell, cellIndex) => {
                        if (data2[rowIndex] && cell !== data2[rowIndex][cellIndex]) {
                            differencesFound = true;
                            const cellName = `[열 ${String.fromCharCode(65 + cellIndex)}행 ${rowIndex + 1}] 값이 서로 다릅니다.`;
                            const p = document.createElement('p');
                            p.textContent = cellName;
                            resultElement.appendChild(p);
                        }
                    });
                });

                if (!differencesFound) {
                    resultElement.innerHTML = '<p>모든 셀의 값이 일치합니다.</p>';
                }
            };
            reader2.readAsText(file2);
        };
        reader1.readAsText(file1);
    }
</script>
</body>
</html>
